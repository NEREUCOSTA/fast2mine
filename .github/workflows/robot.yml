name: Continuos Integration

on: 
  push:
    branches: [main, Developer]
  pull_request:
    branches: [main]
  

jobs:
  qa_continuos_integration:
    runs-on: ubuntu-latest

    steps:
      - name: Copiar os arquivos do projeto
        uses: actions/checkout@v4.1.4

      - name: Instalar o node
        uses: actions/setup-node@v4
        with:
          node-version: '22'

      - name: Instalar o python
        uses: actions/setup-python@v5
        with:
          python-version: '3.12'
          
      - name: Instalar as Bibliotecas do projeto
        run: |
              python -m pip install --upgrade pip
              pip install -r requirements.txt
      
      - name: Browser Init
        run:  rfbrowser init

      - name: Execução dos testes 
        run: |
              robot -d results test_cases
      
      - name: Robot Reporter
        uses: joonvena/robotframework-reporter-action@v2.4
        with:
          gh_access_token: ${{ secrets.GITHUB_TOKEN }}
          report_path: results
      
      - name: Upload Report
        uses: actions/upload-artifact@v4.3.3
        with:
          name: Relatório de Testes
          path: results
